!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("Squigglier",[],e):"object"==typeof exports?exports.Squigglier=e():t.Squigglier=e()}(window,function(){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=2)}([function(t,e,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};e.__esModule=!0;var i=n(1),o=n(7),a=n(8),s=function(){function t(){}return t.expandSettingValue=function(t,e){return t?t.split(e).reduce(function(t,e){var n=e.split(/:/);return t[n[0]]=!(n.length>1)||n[1],t},{}):{}},t.checkIgnore=function(t,e,n,r){for(var i in n){var o=t.getAttribute(i)||e[i];if(r(n[i],o))return!0}return!1},t.applyValidGeometries=function(e,n){void 0===n&&(n={});var r=i.Animate.inspectSvg(e),o={},a=t.expandSettingValue(n.limit,/[\,\&]/),s=t.expandSettingValue(n.exclude,/[\,\&]/);for(var u in r.geos){var l=r.geos[u],c=t.expandSettingValue(l.getAttribute("style"),/\s*;\s*/);t.checkIgnore(l,c,a,function(t,e){return t!==(null==e?"default":e)})||t.checkIgnore(l,c,s,function(t,e){return t===(null==e?"default":e)})||(o[u]=l)}return o},t.geometriesToGeoMeta=function(e,n,i){var o=Object.keys(e).reduce(function(o,a){var s,u=e[a],l=u.getTotalLength(),c=l>=n,f=c?o.totalDrawableGeoLength+l:o.totalDrawableGeoLength,d=o.totalGeoLength+l,h=c?l/f*i:t.NONDRAWABLE_DURATION;return{totalDrawableGeoLength:f,totalGeoLength:d,totalDelay:0,geoData:r({},o.geoData,((s={})[a]=r({},o.geoData[a]||{},{geo:u,length:l,drawable:c,duration:h}),s))}},{totalGeoLength:0,totalDrawableGeoLength:0,totalDelay:0,geoData:{}}),a=o.geoData,s=Object.keys(a).reduce(function(t,e){return t+a[e].duration},0),u=i/s;return Object.keys(a).sort(function(t,e){return a[t].length>a[e].length?-1:1}).forEach(function(t){var e=a[t];e.duration*=u,e.delay=o.totalDelay,o.totalDelay+=e.duration}),o},t.withStyleSheet=function(t){var e=document.styleSheets&&document.styleSheets[0];e&&t(e)},t.defaultFloat=function(t,e){return null!=t&&parseFloat(t)?parseFloat(t):e},t.NONDRAWABLE_DURATION=.5,t.freehand=o.Freehand.render,t.fillin=a.FillIn.render,t}();e.Animations=s},function(t,e,n){"use strict";e.__esModule=!0;var r=function(){function t(){}return t.svgOverride=function(t,e){for(var n=0,r=Object.keys(e);n<r.length;n++){var i=r[n];t.setAttribute(i,e[i])}for(var o in t.childNodes){var a=t.childNodes[o];a instanceof SVGElement&&this.svgOverride(a,e)}},t.SVG_GEO_ELEMENTS=["circle","ellipse","line","path","polygon","polyline","rect","text"],t.inspectSvg=function(e,n){if(void 0===n&&(n={geos:[]}),-1!==t.SVG_GEO_ELEMENTS.indexOf(e.tagName))return n.geos.push(e),n;if("g"===e.tagName||"svg"===e.tagName)for(var r in e.childNodes)n=this.inspectSvg(e.childNodes[r],n);return n},t}();e.Animate=r},function(t,e,n){t.exports=n(3)},function(t,e,n){"use strict";e.__esModule=!0;var r=n(4);document.addEventListener("DOMContentLoaded",function(){return new r.Loader(document.getElementsByTagName("svg"))})},function(t,e,n){"use strict";e.__esModule=!0;var r=n(5),i=n(6),o=function(){function t(t){for(var e in this.assets={},t)this.loadSrc(t[e])}return t.prototype.loadObject=function(t,e){var n=new XMLHttpRequest;n.open("GET",t,!0),n.send(),n.onload=function(){e(n.responseXML.firstChild)}},t.prototype.parseSettings=function(t){for(var e=t.split(/\s+/),n=e.shift(),r={},i=0,o=e;i<o.length;i++){var a=o[i].split(/=/),s=a[0],u=a[1];r[s]=void 0===u||u}return{command:n,settings:r}},t.prototype.loadSrc=function(t){var e=this;!t.getAttribute&&Array.isArray(t)&&(t=t[0]);var n="function"==typeof t.getAttribute&&t.getAttribute("src");n&&this.loadObject(n,function(n){for(var o=n.attributes,a=[],s=[],u=0,l=Object.keys(t.attributes);u<l.length;u++){var c=l[u],f=t.attributes[c];if(!o.hasOwnProperty(f.name)){switch(f.name){case"animation":f.value.split(/\s*;\s*/).forEach(function(t){return a.push(e.parseSettings(t))});break;case"filter":f.value.split(/\s*;\s*/).forEach(function(t){return s.push(e.parseSettings(t))})}n.setAttribute(f.name,f.value)}}for(var d=0,h=s;d<h.length;d++){var p=h[d],y=p.command,g=p.settings;"function"==typeof r.Filters[y]&&r.Filters[y](n,g)}n instanceof SVGSVGElement&&i.Sequence.attach(n).addActions(a).finally(function(){e.assets[n.getAttribute("id")]=n.outerHTML,t.outerHTML=n.outerHTML}).run()})},t}();e.Loader=o},function(t,e,n){"use strict";e.__esModule=!0;var r=n(1),i=function(){function t(){}return t.animate=function(t,e){void 0===e&&(e={}),r.Animate.svgOverride(t,e)},t}();e.Filters=i},function(t,e,n){"use strict";e.__esModule=!0;var r=n(0),i=n(9),o=function(){function t(t){this.actions=[],this._index=0,this.actionSettings={},this._element=t,this._style=new i.SVGStyle(this._element,this)}return t.prototype.element=function(){return this._element},t.prototype.index=function(){return this._index},t.prototype.style=function(){return this._style},t.attach=function(e){return new t(e)},t.prototype.settings=function(t){void 0===t&&(t={}),this.actionSettings=t},t.prototype.run=function(){var t=this;this._index++,0===this.actions.length&&(this._style.render(),"function"==typeof this.finalAction&&this.finalAction());var e=this.actions.shift();if(!e)return this;var n=e.command,i=e.settings;return Object.keys(this.actionSettings).forEach(function(e){if(void 0===i[e])return i[e]=t.actionSettings[e].toString(),t;isNaN(i[e])||isNaN(t.actionSettings[e])||(i[e]=(parseFloat(i[e])+parseFloat(t.actionSettings[e])).toString())}),r.Animations[n](i,this),this},t.prototype.finally=function(t){return this.finalAction=t,this},t.prototype.addActions=function(t){for(var e=0,n=t;e<n.length;e++){var i=n[e],o=i.command,a=i.settings;"function"==typeof r.Animations[o]&&this.actions.push({command:o,settings:a})}return this},t}();e.Sequence=o},function(t,e,n){"use strict";e.__esModule=!0;var r=n(0),i=function(){function t(){}return t.render=function(t,e){void 0===t&&(t={});var n=e.element().getAttribute("id"),i=r.Animations.defaultFloat(t.width,30),o=r.Animations.defaultFloat(t.minLength,0),a=r.Animations.defaultFloat(t.duration,5),s=void 0!==t.await,u=r.Animations.applyValidGeometries(e.element(),t),l=r.Animations.geometriesToGeoMeta(u,o,a);Object.keys(l.geoData).forEach(function(t){var r=l.geoData[t],o=n+"-"+e.index()+"-"+t;if(!r.drawable)return r.geo.classList.add(o+"-tiny"),e.style().keyframes(o+"-freehand").add({from:{opacity:0},to:{opacity:1}}),void e.style().selector("."+o+"-tiny").add({opacity:0,animation:o+"-freehand 0s linear forwards","animation-delay":r.delay+"s"});var a=document.createElementNS(e.element().getAttribute("xmlns"),"mask");a.setAttribute("id",o+"-mask"),a.setAttribute("maskUnits","userSpaceOnUse"),a.innerHTML='<path class="'+o+'-mask" d="'+r.geo.getAttribute("d")+'"/>',e.element().append(a),r.geo.setAttribute("mask","url(#"+o+"-mask)"),e.style().selector("#"+o+"-mask").add({fill:"none",stroke:"white","stroke-width":i,"stroke-dasharray":r.length+" "+r.length,"stroke-dashoffset":""+r.length,animation:o+"-freehand "+r.duration+"s linear forwards","animation-delay":r.delay+"s"}),e.style().keyframes(o+"-freehand").add({from:{"stroke-dashoffset":r.length},to:{"stroke-dashoffset":0}})}),e.settings({delay:s?l.totalDelay:0}),e.run()},t}();e.Freehand=i},function(t,e,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};e.__esModule=!0;var i=n(0),o=function(){function t(){}return t.render=function(t,e){void 0===t&&(t={});var n=i.Animations.applyValidGeometries(e.element(),t),o=e.element().getAttribute("id"),a=i.Animations.defaultFloat(t.opacity,0),s=i.Animations.defaultFloat(t.delay,0),u=i.Animations.defaultFloat(t.duration,0),l=t.fill;Object.keys(n).forEach(function(t){var i=n[t],c=o+"-"+e.index()+"-"+t,f=o+"-fill-"+t;e.style().keyframes(c+"-opacity").add({from:{opacity:0},to:r({},l?{fill:l}:{},{opacity:a})}),i.classList.add(f),e.style().selector("."+f).add({animation:c+"-opacity "+u+"s linear "+s+"s forwards"})}),e.run()},t}();e.FillIn=o},function(t,e,n){"use strict";e.__esModule=!0;var r=function(){function t(t,e){this.rules={},this.style=t,this.type=e}return t.prototype.add=function(t,e){this.rules[t]=(this.rules[t]?this.rules[t]:[]).concat(this.toArray(e))},t.prototype.css=function(){var t=this,e="KEYFRAMES"===this.type?"@keyframes ":"",n="KEYFRAMES"===this.type?"":":";return Object.keys(this.rules).map(function(r){var i=t.rules[r].reduce(function(t,e){return Object.keys(e).forEach(function(n){t[n]=(t[n]?t[n]:[]).concat(e[n])}),t},{});return""+e+r+" {\n"+Object.keys(i).map(function(e){return""+e+n+" "+("KEYFRAMES"===t.type?"{"+i[e].map(function(t){return Object.keys(t).map(function(e){return e+": "+t[e]+"; "})})+"}":i[e].join(", ")+";")}).join("\n")+"\n}\n"}).join("\n")},t.prototype.toArray=function(t){return Array.isArray(t)?t:[t]},t}();e.RuleFamily=r;var i=function(){function t(t,e){this.ruleFamily=t,this.id=e}return t.prototype.add=function(t){return this.ruleFamily.add(this.id,t),this},t}();e.IdentifiedRuleAdder=i;var o=function(){function t(t){this.ruleFamily=t}return t.prototype.add=function(t,e){return this.ruleFamily.add(t,e),this},t}();e.UnidentifiedRuleAdder=o;var a=function(){function t(t,e){this.sequence=e,this.rules={keyframes:new r(this,"KEYFRAMES"),selector:new r(this,"SELECTOR")},this.element=t}return t.prototype.wrap=function(t,e){return t?{add:function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return n?2===n.length&&"string"==typeof n[0]&&"object"==typeof n[1]?e.add(n[0],n[1]):1===n.length&&"object"==typeof n[0]?e.add(t,n[0]):e:e}}:{add:function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return t&&2===t.length&&"string"==typeof t[0]&&"object"==typeof t[1]?e.add(t[0],t[1]):e}}},t.prototype.render=function(){var t=[this.rules.keyframes.css(),this.rules.selector.css()].join("\n");this.styleSheet=document.createElement("style"),this.styleSheet.innerHTML=t,this.element.insertAdjacentElement("afterbegin",this.styleSheet)},t.prototype.keyframes=function(t){return this.wrap(t,this.rules.keyframes)},t.prototype.selector=function(t){return this.wrap(t,this.rules.selector)},t}();e.SVGStyle=a}])});
//# sourceMappingURL=squigglier.js.map