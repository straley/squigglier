!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("Squigglier",[],t):"object"==typeof exports?exports.Squigglier=t():e.Squigglier=t()}(window,function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=2)}([function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};t.__esModule=!0;var o=n(1),i=n(5),a=n(6),u=function(){function e(){}return e.expandSettingValue=function(e,t){return e?e.split(t).reduce(function(e,t){var n=t.split(/:/);return e[n[0]]=!(n.length>1)||n[1],e},{}):{}},e.checkIgnore=function(e,t,n,r){for(var o in n){var i=e.getAttribute(o)||t[o];if(r(n[o],i))return!0}return!1},e.applyValidGeometries=function(t,n){void 0===n&&(n={});var r=o.Animate.inspectSvg(t),i={},a=e.expandSettingValue(n.limit,/[\,\&]/),u=e.expandSettingValue(n.exclude,/[\,\&]/);for(var s in r.geos){var l=r.geos[s],c=e.expandSettingValue(l.getAttribute("style"),/\s*;\s*/);e.checkIgnore(l,c,a,function(e,t){return e!==(null==t?"default":t)})||e.checkIgnore(l,c,u,function(e,t){return e===(null==t?"default":t)})||(i[s]=l)}return i},e.geometriesToGeoMeta=function(t,n,o){var i=Object.keys(t).reduce(function(i,a){var u,s=t[a],l=s.getTotalLength(),c=l>=n,f=c?i.totalDrawableGeoLength+l:i.totalDrawableGeoLength,d=i.totalGeoLength+l,g=c?l/f*o:e.NONDRAWABLE_DURATION;return{totalDrawableGeoLength:f,totalGeoLength:d,totalDelay:0,geoData:r({},i.geoData,((u={})[a]=r({},i.geoData[a]||{},{geo:s,length:l,drawable:c,duration:g}),u))}},{totalGeoLength:0,totalDrawableGeoLength:0,totalDelay:0,geoData:{}}),a=i.geoData,u=Object.keys(a).reduce(function(e,t){return e+a[t].duration},0),s=o/u;return Object.keys(a).sort(function(e,t){return a[e].length>a[t].length?-1:1}).forEach(function(e){var t=a[e];t.duration*=s,t.delay=i.totalDelay,i.totalDelay+=t.duration}),i},e.withStyleSheet=function(e){var t=document.styleSheets&&document.styleSheets[0];t&&e(t)},e.defaultFloat=function(e,t){return null!=e&&parseFloat(e)?parseFloat(e):t},e.addElement=function(e,t,n){var r=document.createElement("template");r.innerHTML=t,n?e.insertAdjacentElement("afterbegin",r.content.firstElementChild):e.append(r.content)},e.NONDRAWABLE_DURATION=.5,e.freehand=i.Freehand.render,e.fillin=a.FillIn.render,e}();t.Animations=u},function(e,t,n){"use strict";t.__esModule=!0;var r=function(){function e(){}return e.svgOverride=function(e,t){for(var n=0,r=Object.keys(t);n<r.length;n++){var o=r[n];e.setAttribute(o,t[o])}for(var i in e.childNodes){var a=e.childNodes[i];a instanceof SVGElement&&this.svgOverride(a,t)}},e.SVG_GEO_ELEMENTS=["circle","ellipse","line","path","polygon","polyline","rect","text"],e.inspectSvg=function(t,n){if(void 0===n&&(n={geos:[]}),-1!==e.SVG_GEO_ELEMENTS.indexOf(t.tagName))return n.geos.push(t),n;if("g"===t.tagName||"svg"===t.tagName)for(var r in t.childNodes)n=this.inspectSvg(t.childNodes[r],n);return n},e}();t.Animate=r},function(e,t,n){e.exports=n(3)},function(e,t,n){"use strict";t.__esModule=!0;var r=n(4);document.addEventListener("DOMContentLoaded",function(){return new r.Loader(document.getElementsByTagName("svg"))})},function(e,t,n){"use strict";t.__esModule=!0;var r=n(0),o=n(7),i=function(){function e(e){for(var t in e)this.loadSrc(e[t])}return e.prototype.loadObject=function(e,t){var n=new XMLHttpRequest;n.open("GET",e,!0),n.send(),n.onload=function(){t(n.responseXML.firstChild)}},e.prototype.parseSettings=function(e){for(var t=e.split(/\s+/),n=t.shift(),r={},o=0,i=t;o<i.length;o++){var a=i[o].split(/=/),u=a[0],s=a[1];r[u]=s}return[n,r]},e.prototype.loadSrc=function(e){var t=this;!e.getAttribute&&Array.isArray(e)&&(e=e[0]);var n="function"==typeof e.getAttribute&&e.getAttribute("src");n&&this.loadObject(n,function(n){for(var i=n.attributes,a=[],u=[],s=0,l=Object.keys(e.attributes);s<l.length;s++){var c=l[s],f=e.attributes[c];if(!i.hasOwnProperty(f.name)){switch(f.name){case"animation":f.value.split(/\s*;\s*/).forEach(function(e){return a.push(t.parseSettings(e))});break;case"filter":f.value.split(/\s*;\s*/).forEach(function(e){return u.push(t.parseSettings(e))})}n.setAttribute(f.name,f.value)}}for(var d=0,g=u;d<g.length;d++){var p=g[d],h=p[0],m=p[1];"function"==typeof o.Filters[h]&&o.Filters[h](n,m)}for(var v=[],y=function(t){if(0!==v.length){var n=v.shift(),o=n.element,i=n.command,a=n.settings;console.log(o.constructor,o.getAttribute("id"),i,a),r.Animations[i](o,a,y)}else e.outerHTML=t.outerHTML},b=0,A=a;b<A.length;b++){var S=A[b];h=S[0],m=S[1];"function"==typeof r.Animations[h]&&v.push({element:n,command:h,settings:m})}console.log("o",n.getAttribute("id"),n.constructor),y(n)})},e}();t.Loader=i},function(e,t,n){"use strict";t.__esModule=!0;var r=n(0),o=function(){function e(){}return e.render=function(e,t,n){void 0===t&&(t={}),console.log("FREEHAND"),r.Animations.withStyleSheet(function(n){console.log("HAS CSS");var o=e.getAttribute("id"),i=r.Animations.defaultFloat(t.width,30),a=r.Animations.defaultFloat(t.minLength,0),u=r.Animations.defaultFloat(t.duration,3),s=document.createElement("defs"),l=r.Animations.applyValidGeometries(e,t),c=r.Animations.geometriesToGeoMeta(l,a,u);Object.keys(c.geoData).forEach(function(e){var t=c.geoData[e];if(!t.drawable)return t.geo.classList.add(o+"-tiny-"+e),n.insertRule("\n              @keyframes "+o+"-freehand-"+e+" {\n                from { opacity: 0; }\n                to { opacity: 1; }\n              }\n            "),void n.insertRule("\n              ."+o+"-tiny-"+e+" {\n                opacity: 0;\n                animation: "+o+"-freehand-"+e+" 0s linear forwards;\n                animation-delay: "+t.delay+"s;\n              }\n            ");r.Animations.addElement(s,'\n            <mask id="'+o+"-mask-"+e+'" maskUnits="userSpaceOnUse">\n              <path class="'+o+'-mask" d="'+t.geo.getAttribute("d")+'"/>\n            </mask>\n          ',"beforeend"),t.geo.setAttribute("mask","url(#"+o+"-mask-"+e+")"),n.insertRule("\n            #"+o+"-mask-"+e+" {\n              fill: none;\n              stroke: white;\n              stroke-width: "+i+";\n              stroke-dasharray: "+t.length+" "+t.length+";\n              stroke-dashoffset: "+t.length+";\n              animation: "+o+"-freehand-"+e+" "+t.duration+"s linear forwards;\n              animation-delay: "+t.delay+"s;\n            }\n          "),n.insertRule("\n            @keyframes "+o+"-freehand-"+e+" {\n              from { stroke-dashoffset: "+t.length+"; }\n              to { stroke-dashoffset: 0; }\n            }\n          ")}),e.insertAdjacentElement("afterbegin",s)}),"function"==typeof n&&n(e)},e}();t.Freehand=o},function(e,t,n){"use strict";t.__esModule=!0;var r=n(0),o=function(){function e(){}return e.render=function(e,t,n){void 0===t&&(t={}),r.Animations.withStyleSheet(function(n){var o=r.Animations.applyValidGeometries(e,t);Object.keys(o).forEach(function(e){o[e].setAttribute("opacity","0.25")})}),"function"==typeof n&&n(e)},e}();t.FillIn=o},function(e,t,n){"use strict";t.__esModule=!0;var r=n(1),o=function(){function e(){}return e.animate=function(e,t){void 0===t&&(t={}),r.Animate.svgOverride(e,t)},e}();t.Filters=o}])});
//# sourceMappingURL=squigglier.js.map