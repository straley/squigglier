!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("Squigglier",[],t):"object"==typeof exports?exports.Squigglier=t():e.Squigglier=t()}(window,function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=2)}([function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};t.__esModule=!0;var i=n(1),o=n(7),a=n(8),s=function(){function e(){}return e.expandSettingValue=function(e,t){return e?e.split(t).reduce(function(e,t){var n=t.split(/:/);return e[n[0]]=!(n.length>1)||n[1],e},{}):{}},e.checkIgnore=function(e,t,n,r){for(var i in n){var o=e.getAttribute(i)||t[i];if(r(n[i],o))return!0}return!1},e.applyValidGeometries=function(t,n){void 0===n&&(n={});var r=i.Animate.inspectSvg(t),o={},a=e.expandSettingValue(n.limit,/[\,\&]/),s=e.expandSettingValue(n.exclude,/[\,\&]/);for(var u in r.geos){var l=r.geos[u],c=e.expandSettingValue(l.getAttribute("style"),/\s*;\s*/);e.checkIgnore(l,c,a,function(e,t){return e!==(null==t?"default":t)})||e.checkIgnore(l,c,s,function(e,t){return e===(null==t?"default":t)})||(o[u]=l)}return o},e.geometriesToGeoMeta=function(t,n,i){var o=Object.keys(t).reduce(function(o,a){var s,u=t[a],l=u.getTotalLength(),c=l>=n,f=c?o.totalDrawableGeoLength+l:o.totalDrawableGeoLength,d=o.totalGeoLength+l,p=c?l/f*i:e.NONDRAWABLE_DURATION;return{totalDrawableGeoLength:f,totalGeoLength:d,totalDelay:0,geoData:r({},o.geoData,((s={})[a]=r({},o.geoData[a]||{},{geo:u,length:l,drawable:c,duration:p}),s))}},{totalGeoLength:0,totalDrawableGeoLength:0,totalDelay:0,geoData:{}}),a=o.geoData,s=Object.keys(a).reduce(function(e,t){return e+a[t].duration},0),u=i/s;return Object.keys(a).sort(function(e,t){return a[e].length>a[t].length?-1:1}).forEach(function(e){var t=a[e];t.duration*=u,t.delay=o.totalDelay,o.totalDelay+=t.duration}),o},e.withStyleSheet=function(e){var t=document.styleSheets&&document.styleSheets[0];t&&e(t)},e.defaultFloat=function(e,t){return null!=e&&parseFloat(e)?parseFloat(e):t},e.addElement=function(e,t,n){var r=document.createElement("template");r.innerHTML=t,n?e.insertAdjacentElement("afterbegin",r.content.firstElementChild):e.append(r.content)},e.NONDRAWABLE_DURATION=.5,e.freehand=o.Freehand.render,e.fillin=a.FillIn.render,e}();t.Animations=s},function(e,t,n){"use strict";t.__esModule=!0;var r=function(){function e(){}return e.svgOverride=function(e,t){for(var n=0,r=Object.keys(t);n<r.length;n++){var i=r[n];e.setAttribute(i,t[i])}for(var o in e.childNodes){var a=e.childNodes[o];a instanceof SVGElement&&this.svgOverride(a,t)}},e.SVG_GEO_ELEMENTS=["circle","ellipse","line","path","polygon","polyline","rect","text"],e.inspectSvg=function(t,n){if(void 0===n&&(n={geos:[]}),-1!==e.SVG_GEO_ELEMENTS.indexOf(t.tagName))return n.geos.push(t),n;if("g"===t.tagName||"svg"===t.tagName)for(var r in t.childNodes)n=this.inspectSvg(t.childNodes[r],n);return n},e}();t.Animate=r},function(e,t,n){e.exports=n(3)},function(e,t,n){"use strict";t.__esModule=!0;var r=n(4);document.addEventListener("DOMContentLoaded",function(){return new r.Loader(document.getElementsByTagName("svg"))})},function(e,t,n){"use strict";t.__esModule=!0;var r=n(5),i=n(6),o=function(){function e(e){for(var t in e)this.loadSrc(e[t])}return e.prototype.loadObject=function(e,t){var n=new XMLHttpRequest;n.open("GET",e,!0),n.send(),n.onload=function(){t(n.responseXML.firstChild)}},e.prototype.parseSettings=function(e){for(var t=e.split(/\s+/),n=t.shift(),r={},i=0,o=t;i<o.length;i++){var a=o[i].split(/=/),s=a[0],u=a[1];r[s]=void 0===u||u}return{command:n,settings:r}},e.prototype.loadSrc=function(e){var t=this;!e.getAttribute&&Array.isArray(e)&&(e=e[0]);var n="function"==typeof e.getAttribute&&e.getAttribute("src");n&&this.loadObject(n,function(n){for(var o=n.attributes,a=[],s=[],u=0,l=Object.keys(e.attributes);u<l.length;u++){var c=l[u],f=e.attributes[c];if(!o.hasOwnProperty(f.name)){switch(f.name){case"animation":f.value.split(/\s*;\s*/).forEach(function(e){return a.push(t.parseSettings(e))});break;case"filter":f.value.split(/\s*;\s*/).forEach(function(e){return s.push(t.parseSettings(e))})}n.setAttribute(f.name,f.value)}}for(var d=0,p=s;d<p.length;d++){var h=p[d],m=h.command,g=h.settings;"function"==typeof r.Filters[m]&&r.Filters[m](n,g)}n instanceof SVGSVGElement&&new i.Sequence(n,e).addActions(a).nextAction()})},e}();t.Loader=o},function(e,t,n){"use strict";t.__esModule=!0;var r=n(1),i=function(){function e(){}return e.animate=function(e,t){void 0===t&&(t={}),r.Animate.svgOverride(e,t)},e}();t.Filters=i},function(e,t,n){"use strict";t.__esModule=!0;var r=n(0),i=function(){function e(e,t){this.actions=[],this._index=0,this._keyframesRules={},this._selectorRules={},this._element=e,this._target=t}return e.prototype.element=function(){return this._element},e.prototype.target=function(){return this._target},e.prototype.index=function(){return this._index},e.prototype.nextAction=function(e){var t=this;if(void 0===e&&(e={}),this._index++,0===this.actions.length)return r.Animations.withStyleSheet(function(e){Object.keys(t._keyframesRules).forEach(function(n){e.insertRule("@keyframes "+n+" "+t._keyframesRules[n])}),Object.keys(t._selectorRules).forEach(function(n){e.insertRule(n+" "+t._selectorRules[n])})}),this._target.outerHTML=this._element.outerHTML,this;var n=this.actions.shift(),i=n.command,o=n.settings;return Object.keys(e).forEach(function(n){if(void 0===o[n])return o[n]=e[n].toString(),t;isNaN(o[n])||isNaN(e[n])||(o[n]=(parseFloat(o[n])+parseFloat(e[n])).toString())}),r.Animations[i](o,this),this},e.prototype.addActions=function(e){for(var t=0,n=e;t<n.length;t++){var i=n[t],o=i.command,a=i.settings;"function"==typeof r.Animations[o]&&this.actions.push({command:o,settings:a})}return this},e.prototype.addKeyFramesRule=function(e,t){this._keyframesRules[e]=t},e.prototype.parseSelectorRule=function(e){return e.replace(/^[^\{]*\{/,"").replace(/\}[^\}]*$/,"").split(/\;/).map(function(e){return e.trim()}).reduce(function(e,t){var n=t.split(/\s*:\s*/),r=n[0],i=n[1];return r&&(e[r]=i),e},{})},e.prototype.addSelectorRule=function(e,t){var n=this.parseSelectorRule(t),r=this._selectorRules[e];if(r){var i=this.parseSelectorRule(r);return Object.keys(n).forEach(function(e){i[e]=(i[e]?i[e].split(/\s*:\s*/):[]).concat(n[e]?n[e].split(/\s*:\s*/):[]).join(", ")}),void(this._selectorRules[e]="\n        {\n          "+Object.keys(i).map(function(e){return e+": "+i[e]+";"}).join("")+"\n        }")}this._selectorRules[e]=t},e}();t.Sequence=i},function(e,t,n){"use strict";t.__esModule=!0;var r=n(0),i=function(){function e(){}return e.render=function(e,t){void 0===e&&(e={}),r.Animations.withStyleSheet(function(n){var i=t.element().getAttribute("id"),o=r.Animations.defaultFloat(e.width,30),a=r.Animations.defaultFloat(e.minLength,0),s=r.Animations.defaultFloat(e.duration,3),u=void 0!==e.await,l=document.createElement("defs"),c=r.Animations.applyValidGeometries(t.element(),e),f=r.Animations.geometriesToGeoMeta(c,a,s);Object.keys(f.geoData).forEach(function(e){var a=f.geoData[e],s=i+"-"+t.index()+"-"+e;if(!a.drawable)return a.geo.classList.add(s+"-tiny"),n.insertRule("\n              @keyframes "+s+"-freehand {\n                from { opacity: 0; }\n                to { opacity: 1; }\n              }\n            "),void n.insertRule("\n              ."+s+"-tiny {\n                opacity: 0;\n                animation: "+s+"-freehand 0s linear forwards;\n                animation-delay: "+a.delay+"s;\n              }\n            ");r.Animations.addElement(l,'\n            <mask id="'+s+'-mask" maskUnits="userSpaceOnUse">\n              <path class="'+s+'-mask" d="'+a.geo.getAttribute("d")+'"/>\n            </mask>\n          ',"beforeend"),a.geo.setAttribute("mask","url(#"+s+"-mask)"),n.insertRule("\n            #"+s+"-mask {\n              fill: none;\n              stroke: white;\n              stroke-width: "+o+";\n              stroke-dasharray: "+a.length+" "+a.length+";\n              stroke-dashoffset: "+a.length+";\n              animation: "+s+"-freehand "+a.duration+"s linear forwards;\n              animation-delay: "+a.delay+"s;\n            }\n          "),n.insertRule("\n            @keyframes "+s+"-freehand {\n              from { stroke-dashoffset: "+a.length+"; }\n              to { stroke-dashoffset: 0; }\n            }\n          ")}),t.element().insertAdjacentElement("afterbegin",l),t.nextAction({delay:u?f.totalDelay:0})})},e}();t.Freehand=i},function(e,t,n){"use strict";t.__esModule=!0;var r=n(0),i=function(){function e(){}return e.render=function(e,t){void 0===e&&(e={}),r.Animations.withStyleSheet(function(n){var i=r.Animations.applyValidGeometries(t.element(),e),o=t.element().getAttribute("id"),a=r.Animations.defaultFloat(e.opacity,0),s=r.Animations.defaultFloat(e.delay,0),u=r.Animations.defaultFloat(e.duration,0);Object.keys(i).forEach(function(e){var n=i[e],r=o+"-"+t.index()+"-"+e,l=o+"-fill-"+e;t.addKeyFramesRule(r+"-opacity","\n          {\n            from { opacity: 0; }\n            to { opacity: "+a+"; }\n          }\n        "),n.classList.add(l),t.addSelectorRule("."+l,"\n          {\n            animation: "+r+"-opacity "+u+"s linear "+s+"s forwards;\n          }\n        ")})}),t.nextAction()},e}();t.FillIn=i}])});
//# sourceMappingURL=squigglier.js.map